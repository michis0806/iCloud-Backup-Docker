version: "3.8"

services:
  icloud-backup:
    build: .
    container_name: icloud-backup
    restart: unless-stopped
    ports:
      - "${WEB_PORT:-8080}:8080"
    volumes:
      - ${BACKUP_PATH:-./backups}:/backups
      - ${CONFIG_PATH:-./config}:/config
      # Synology DSM notifications (uncomment on Synology NAS)
      # - /usr/syno/bin/synodsmnotify:/usr/local/bin/synodsmnotify:ro
    environment:
      - TZ=${TZ:-Europe/Berlin}
      - SECRET_KEY=${SECRET_KEY:-change-me-in-production}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - DSM_NOTIFY=${DSM_NOTIFY:-false}
      # - AUTH_PASSWORD=mein-sicheres-passwort  # If not set, a random password is logged on startup
